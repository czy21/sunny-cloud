<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
      throwConfigExceptions="false">
  
  <variable name="defaultLayout" value="${longdate} ${level:uppercase=true:padding=-5} ${processid} --- [${configsetting:AppName}] [Thread-${threadid}] [Task-${taskid}] ${logger} - ${message} ${exception:format=ToString}" />
  
  <variable name="logDir" value="${configsetting:LogDir:default=/app/log}"/>
  <variable name="logFile" value="${logDir}/${configsetting:AppName}"/>

  <targets>
    <target name="Console" xsi:type="Console" layout="${defaultLayout}"/>
    <target name="File" xsi:type="File" layout="${defaultLayout}"
            keepFileOpen="false"
            fileName="${logFile}.log"
            archiveFileName="${logFile}-${shortdate}-{#}.log"
            archiveNumbering="Sequence"
            archiveAboveSize="10485760"
            archiveEvery="Day"
            maxArchiveFiles="7"
            encoding="utf-8"/>
  </targets>

  <rules>
    <logger name="*" minlevel="${configsetting:Logging.LogLevel.Default}" writeTo="Console,File" />
  </rules>
  
</nlog>